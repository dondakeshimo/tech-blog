<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#fdf6e3"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#fdf6e3"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description"/><meta property="og:title" content="CLIでTODO管理を行うツールを作ったので紹介させてください"/><meta property="og:type" content="website"/><meta property="og:url" content="{DOMAIN}/posts/2021-07-23-introduce_todo_cli"/><meta property="og:description"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta property="og:image:alt"/><meta property="og:site_name" content="dondakeshimoの丸太"/><meta property="og:locale" content="ja_JP"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:title" content="CLIでTODO管理を行うツールを作ったので紹介させてください"/><meta property="twitter:description"/><meta property="twitter:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta property="twitter:image:alt"/><meta property="twitter:site" content="dondakeshimo"/><meta property="twitter:creator" content="dondakeshimo"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><title>CLIでTODO管理を行うツールを作ったので紹介させてください | dondakeshimoの丸太</title><meta property="og:image" content="/assets/blog/dynamic-routing/cover.jpg"/><meta name="next-head-count" content="31"/><link rel="preload" href="/_next/static/css/0f9d9436e0b0760d86ae.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0f9d9436e0b0760d86ae.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-61095c13c5984b221292.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-c034215587cd157b2989.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d2622b3552023a29a89a.js" defer=""></script><script src="/_next/static/chunks/cb1608f2-854db26f8877d6c8528f.js" defer=""></script><script src="/_next/static/chunks/a9a7754c-ecd5c258dd80f13aa656.js" defer=""></script><script src="/_next/static/chunks/349-e0275456508bca40c658.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-c414199f8f835e5668ae.js" defer=""></script><script src="/_next/static/yNrEyh5A0Oyk3eJQw5kY9/_buildManifest.js" defer=""></script><script src="/_next/static/yNrEyh5A0Oyk3eJQw5kY9/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-vfull"><main><div class="full-container mx-auto px-5"><a class="text-l font-bold text-tight mb-xl mt-l"><a class="logo" href="/"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="hand-point-up" class="svg-inline--fa fa-hand-point-up fa-w-12 svg-l dondake-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M135.652 0c23.625 0 43.826 20.65 43.826 44.8v99.851c17.048-16.34 49.766-18.346 70.944 6.299 22.829-14.288 53.017-2.147 62.315 16.45C361.878 158.426 384 189.346 384 240c0 2.746-.203 13.276-.195 16 .168 61.971-31.065 76.894-38.315 123.731C343.683 391.404 333.599 400 321.786 400H150.261l-.001-.002c-18.366-.011-35.889-10.607-43.845-28.464C93.421 342.648 57.377 276.122 29.092 264 10.897 256.203.008 242.616 0 224c-.014-34.222 35.098-57.752 66.908-44.119 8.359 3.583 16.67 8.312 24.918 14.153V44.8c0-23.45 20.543-44.8 43.826-44.8zM136 416h192c13.255 0 24 10.745 24 24v48c0 13.255-10.745 24-24 24H136c-13.255 0-24-10.745-24-24v-48c0-13.255 10.745-24 24-24zm168 28c-11.046 0-20 8.954-20 20s8.954 20 20 20 20-8.954 20-20-8.954-20-20-20z"></path></svg>dondakeshimoの丸太</a></a><article class="mb-2xl"><h1 class="title text-xl font-bold mb-l text-center">CLIでTODO管理を行うツールを作ったので紹介させてください</h1><div class="container-80 mx-auto"><div class="mb-l text-l"><time dateTime="2021-07-23">July	23, 2021</time></div></div><div class="container-80 mx-auto"><div><h1 id="目次">目次</h1>
<ul>
<li><a href="#todo%E7%AE%A1%E7%90%86%E3%83%84%E3%83%BC%E3%83%AB%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%BE%E3%81%97%E3%81%9F">TODO管理ツールを作りました</a>
<ul>
<li><a href="#todo%E7%AE%A1%E7%90%86%E3%81%AFcli%E3%81%A7%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84">TODO管理はCLIでやりたい</a></li>
<li><a href="#%E3%83%AA%E3%83%9E%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E6%A9%9F%E8%83%BD%E3%81%8C%E6%AC%B2%E3%81%97%E3%81%84">リマインダー機能が欲しい</a></li>
<li><a href="#%E5%BF%85%E8%A6%81%E5%8D%81%E5%88%86%E3%81%AA%E6%A9%9F%E8%83%BD%E3%81%8C%E6%AC%B2%E3%81%97%E3%81%84">必要十分な機能が欲しい</a></li>
</ul>
</li>
<li><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E6%96%B9%E6%B3%95">インストール方法</a>
<ul>
<li><a href="#go">Go</a></li>
<li><a href="#%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89">バイナリのダウンロード</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E3%81%84%E6%96%B9">使い方</a>
<ul>
<li><a href="#%E6%A6%82%E8%A6%81-help%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89">概要 (helpコマンド)</a></li>
<li><a href="#%E5%AE%9F%E9%9A%9B%E3%81%AE%E4%BD%BF%E7%94%A8%E6%84%9F">実際の使用感</a></li>
<li><a href="#%E3%83%AA%E3%83%9E%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC">リマインダー</a>
<ul>
<li><a href="#macos">macos</a></li>
<li><a href="#slack">slack</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li>
</ul>
<h1 id="todo管理ツールを作りました">TODO管理ツールを作りました</h1>
<p>https://github.com/dondakeshimo/todo-cli</p>
<p>todo-cliというTODO管理アプリを作りました。
こちら、Go製になります。</p>
<p>モチベーションは大きく3つあり、以下それぞれについて述べていきます。</p>
<h2 id="todo管理はcliでやりたい">TODO管理はCLIでやりたい</h2>
<p>TODOリストにタスクを加える行為は記憶容量を多少減らしてくれたり、作業再開の際にスムーズに導入できるようにといった目的だと思いますが、そのリターンに対して面倒臭さが勝ってしまうことが往々にしてありました。
自分はキーボードで操作可能なものは全てキーボードで操作すべきという強迫観念にも似た信条を持っており、マウスやタッチパッドに手を伸ばすという行為はそれだけで多少の心象的ハードルを乗り越える必要があります。
そのため、タスクの管理におけるコストを極力下げるためにはCLI操作でサッとタスクを残しておき、またその作業に戻った時にスッとタスクを手に取れるようになっていることが理想です。</p>
<h2 id="リマインダー機能が欲しい">リマインダー機能が欲しい</h2>
<p>TODO管理をCLIで行うだけなら10は裕に超えるソフトウェアが検索に引っかかります。
特に<a href="https://github.com/todotxt/todo.txt-cli">todotxt/todo.txt-cli</a> はStar数が4.6k (2021/07/23時点) もありしっかりとしたコミュニティと様々な機能が提供されています。
しかし、私が検索した中でリマインダー機能を外部アプリケーションと連携せず、独立で提供しているCLIツールは見つけられませんでした。
(リマインダー機能がついたらそれはタスクリストではなくリマインダーでは？というツッコミを入れられた方は夜道にお気をつけください)。</p>
<p>TODOリストの本懐はコンテキストスイッチの量とコストを減らすことだと考えています。
タスク管理を行う上で時間を気にしたり、タスクリストを思い出すといった作業は定期的にコンテキストスイッチが発生することに他なりません。
余計なコンテキストスイッチが発生するのを防ぐためにリマンインダーは有効であると考えており、これを手軽に利用できるタスクリストがあると嬉しいと感じていました。</p>
<h2 id="必要十分な機能が欲しい">必要十分な機能が欲しい</h2>
<p>その他、自分の欲しかった機能をあげていくと</p>
<ul>
<li>優先度によるソート機能</li>
<li>グルーピング機能</li>
<li>タスクのエントリポイント(チケットのURLとか)に直接飛べる機能 &#x3C;- 未実装</li>
</ul>
<p>あたりになります。一番下については自分も本当に欲しいのか半信半疑なのと、良いUXについて迷ったので未実装になっています。</p>
<p>上の二つの項目においては納得いただける方が多いのではないかと思いますし、リッチなタスクマネージャーを利用すれば大抵の場合該当機能は付属しています。
問題となるのは、リッチなタスクマネージャーを利用した場合コマンドが多くてタスク管理のためのコンテキストスイッチが必要になりそうだった部分です。
コンテキストスイッチを減らすための工夫でコンテキストスイッチが増えたら本末がすっ転んでしまいます。
正直自分が作成した管理アプリがそこまでシンプルかと聞かれるとYESとは言い難い気もしますが、コマンド自体はシンプルなtodo管理アプリを参考に4つ程度に収めたのでわかりやすい方ではないかと思います。(自分で作ったので覚えられているだけかもしれませんが...)</p>
<h1 id="インストール方法">インストール方法</h1>
<h2 id="go">Go</h2>
<p>Goをインストールしている方は <code>go install</code> するのが管理しやすくて良いと思います。</p>
<pre><code># Go 1.16+
$ go install github.com/dondakeshimo/todo-cli/cmd/todo@latest

# Go version &#x3C; 1.16
$ go get -u github.com/dondakeshimo/todo-cli/cmd/todo
</code></pre>
<p>Goのバイナリ置き場に <code>PATH</code> を通すことをお忘れなく。</p>
<pre><code>$ export PATH=$PATH:$(go env GOPATH)/bin
</code></pre>
<h2 id="バイナリのダウンロード">バイナリのダウンロード</h2>
<p>Goがインストールされていない環境をお使いの場合はバイナリの直接ダウンロードもできます。
MacとUbuntuの環境でビルドしたものを用意しています。
それ以外の環境の方はUbuntuのものでお祈りするか、Goをインストールの方お願いいたします。</p>
<pre><code>$ TODO_VERSION=1.0.0

$ curl -O https://github.com/dondakeshimo/todo-cli/releases/download/v${TODO_VERSION}/todo-${TODO_VERSION}.macos-10.15.tar.gz

$ tar -xvf todo-${TODO_VERSION}.macos-10.15.tar.gz

$ mv todo path/to/your/$PATH
</code></pre>
<h1 id="使い方">使い方</h1>
<p>https://github.com/dondakeshimo/todo-cli</p>
<p>に頑張って書いたので、ほとんどこれの転載になります。</p>
<h2 id="概要-helpコマンド">概要 (helpコマンド)</h2>
<p>こちらがtodo-cliのコマンドになります。</p>
<pre><code>$ todo --help
Manage Your TODO

Usage:
  todo [command]

Available Commands:
  add         Add a task
  close       Close tasks
  completion  generate the autocompletion script for the specified shell
  configure   Configure your todo-cli
  help        Help about any command
  list        List tasks
  modify      Modify a task
  notify      Notify a task (basicaly be used by system)

Flags:
  -h, --help   help for todo

Use "todo [command] --help" for more information about a command.
</code></pre>
<p>各コマンドのhelpも見られます。</p>
<pre><code>$ todo modify -h
Modify a task

Usage:
  todo modify [flags]

Aliases:
  modify, m

Flags:
  -g, --group string         task group. you can get filtered list by group.
  -h, --help                 help for modify
  -i, --id int               task's ID (default -1)
  -p, --priority int         task's priority. Lower number means high priority. (default 100)
  -d, --remind_time string   remind_time (2021/3/3 03:03, 2021/3/3, +2h3m, task-4h15m)
  -r, --reminder string      choose reminder from [macos, slack]
      --remove_reminder      remove reminder. this option overrides reminder option
  -t, --task string          task contents
</code></pre>
<h2 id="実際の使用感">実際の使用感</h2>
<p>次に実際にどのように使用するかを見ていきます。</p>
<pre><code>$ todo list
+----+--------------------------------+----------------+-------+----------+----------+
| ID |              Task              |   RemindTime   | Group | Reminder | Priority |
+----+--------------------------------+----------------+-------+----------+----------+
|  1 | deleting or modifying this     | 2099/1/1 00:00 |       |          |        0 |
|    | task is your first TODO        |                |       |          |          |
+----+--------------------------------+----------------+-------+----------+----------+

$ todo close -i=1

$ todo l
+----+------+------------+-------+----------+----------+
| ID | Task | RemindTime | Group | Reminder | Priority |
+----+------+------------+-------+----------+----------+
+----+------+------------+-------+----------+----------+

$ todo add "must task" -d="2021/03/03 12:00" -g="project x" -r=slack -p=0

$ todo l
+----+-----------+----------------+-----------+----------+----------+
| ID |   Task    |   RemindTime   |   Group   | Reminder | Priority |
+----+-----------+----------------+-----------+----------+----------+
|  1 | must task | 2021/3/3 12:00 | project x | slack    |        0 |
+----+-----------+----------------+-----------+----------+----------+

$ todo a "boring task" -g="project x"

$ todo a "important task" -d="2022/01/01" -p=50

$ todo l
+----+----------------+----------------+-----------+----------+----------+
| ID |      Task      |   RemindTime   |   Group   | Reminder | Priority |
+----+----------------+----------------+-----------+----------+----------+
|  1 | must task      | 2021/3/3 12:00 | project x | slack    |        0 |
|  2 | important task | 2022/1/1 00:00 |           |          |       50 |
|  3 | boaring task   |                | project x |          |      100 |
+----+----------------+----------------+-----------+----------+----------+

$ todo m -i=1 -t="should task" -p=10

$ todo l -g="project x"
+----+--------------+----------------+-----------+----------+----------+
| ID |     Task     |   RemindTime   |   Group   | Reminder | Priority |
+----+--------------+----------------+-----------+----------+----------+
|  1 | should task  | 2021/3/3 12:00 | project x | slack    |       10 |
|  3 | boaring task |                | project x |          |      100 |
+----+--------------+----------------+-----------+----------+----------+

$ todo conf --hide_reminder=true --show_config
columnwidth: 30
hidegroup: false
hidepriority: false
hidereminder: true
slackmentionto: XXXXXXXXXX
slackwebhookurl: https://hooks.slack.com/services/XXXXXXXXXX/XXXXXXXXXX/XXXXXXXXXX
taskfilepath: /home/dondakeshimo/.local/share/todo/todo.json

$ todo l
+----+----------------+----------------+-----------+----------+
| ID |      Task      |   RemindTime   |   Group   | Priority |
+----+----------------+----------------+-----------+----------+
|  1 | should task    | 2021/3/3 12:00 | project x |       10 |
|  2 | important task | 2022/1/1 00:00 |           |       50 |
|  3 | boaring task   |                | project x |      100 |
+----+----------------+----------------+-----------+----------+
</code></pre>
<p>使用感はこんな感じになります。</p>
<p>configのところで察された方もいるかもしれませんが、全ての情報をファイルで持っています。
短期間のTODO管理に堅牢な永続化は不要ですし、トランザクションや競合もユーザが一人想定なので不要です。
ファイルで十分だったのでそのように実装したのですが、副次的にファイルを管理することで複数のTODO管理を切り替えたり、新しい環境にTODOリストを引き継ぐことが可能になりました。(私はそのようなことはしないと思いますが)</p>
<p>後はそうですね、上記の例で見せられていない部分としてcloseする際のidは複数選択可能です。 <code>-id 1,2,3,4</code> のように指定できます。
また、 <code>-d</code> オプションは相対時間で指定することが可能になっています。これは後述するリマインダーの使用方法で使っています。</p>
<h2 id="リマインダー">リマインダー</h2>
<p>実装に大いに苦しめられましたが、使用者からしたら開発者の苦労話など基本的にどうでも良いと思うので別記事にまとめます。</p>
<p>リマインダーは2種類用意しています。</p>
<ul>
<li>macos</li>
<li>slack</li>
</ul>
<p>名前の通りmacosはMacでのみ利用可能です。Slackは事前に設定が必要になりますが、linux環境できます。
Windows環境については未対応になります(私がWindowsで開発を行わないため、しばらく対応されないと思います)。</p>
<h3 id="macos">macos</h3>
<p>macosはシステムのポップアップを用いたリマインダー機能になります。
リマインダーの名前は <code>macos</code> となっています。</p>
<pre><code>$ todo a "remind me this task" -r=macos -d=+1m

$ todo l
+----+---------------------+-----------------+-------+----------+----------+
| ID |        Task         |   RemindTime    | Group | Reminder | Priority |
+----+---------------------+-----------------+-------+----------+----------+
|  1 | remind me this task | 2021/3/3 01:01  |       | macos    |      100 |
+----+---------------------+-----------------+-------+----------+----------+
</code></pre>
<p>上記のようにタスクを登録すれば、1分後に下記のような通知を受け取れます。</p>
<p><img src="https://user-images.githubusercontent.com/23194960/126190791-be2dae4a-5e56-4e59-8151-a6d88e48f0e9.png" alt="notification"></p>
<p>doneボタンを押すとタスクは自動的にクローズされて、skipを押すと特に何もしません。
当初は何分後に再通知するみたいなボタンを足そうかと考えていた気がするのですが、疲れた時期に実装していた箇所であることと、結局あったところで自分は使わないなと思い未実装です。</p>
<h3 id="slack">slack</h3>
<p>Slackを用いたリマインダーを利用するためには事前に設定が必要になります。
<a href="https://slack.com/intl/ja-jp/help/articles/115005265063-Slack-%E3%81%A7%E3%81%AE-Incoming-Webhook-%E3%81%AE%E5%88%A9%E7%94%A8">Slack での Incoming Webhook の利用</a> を参考にIncoming Webhookを通知させたいSlackのworkspaceに導入したいただく必要があります。
こちらで設定した際に得られるWebhook URLと、workspaceにおける自分のmember IDをtodo-cliに設定します。
設定コマンドは下記の通りになります。</p>
<pre><code>$ todo conf --slack_webhook_url="https://hooks.slack.com/services/XXXXXXXX/XXXXXXXX" --slack_mention_to=XXXXXXXXXX
</code></pre>
<p>それでは <code>-r slack</code> オプションを使ってタスクを追加します。</p>
<pre><code>$ todo a "remind me this task in slack\!" -r=slack -d=+1m

$ todo l
+----+-------------------------------+-----------------+-------+----------+----------+
| ID |             Task              |   RemindTime    | Group | Reminder | Priority |
+----+-------------------------------+-----------------+-------+----------+----------+
|  1 | remind me this task in slack! | 2021/7/20 01:11 |       | slack    |      100 |
+----+-------------------------------+-----------------+-------+----------+----------+
</code></pre>
<p>1分後に下図のような通知がslackに届いていると思います。</p>
<p><img src="https://user-images.githubusercontent.com/23194960/126192217-cee8469b-b917-4770-ab76-f604556bd3e2.png" alt="notification in slack"></p>
<h1 id="まとめ">まとめ</h1>
<p>本記事ではtodo-cliを作成した理由と使用方法の紹介を行いました。
是非使用の検討をしていただければと思います。</p>
<p>開発における工夫した点や学び気づきなどは別記事を書こうと思うのでそちらも見ていただければ幸いです。</p></div></div></article></div></main></div><footer><div class="full-container mx-auto px-5"><div class="full-container mx-auto px-5"><div class="py-m sns-container my-l"><div class="mx-s github-icon"><a href="https://github.com/dondakeshimo"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></div><div class="mx-s twitter-icon"><a href="https://twitter.com/dondakeshimo"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></div></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"CLIでTODO管理を行うツールを作ったので紹介させてください","date":"2021-07-23","slug":"2021-07-23-introduce_todo_cli","author":{"name":"JJ Kasper","picture":"/assets/blog/authors/jj.jpeg"},"content":"\u003ch1 id=\"目次\"\u003e目次\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#todo%E7%AE%A1%E7%90%86%E3%83%84%E3%83%BC%E3%83%AB%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%BE%E3%81%97%E3%81%9F\"\u003eTODO管理ツールを作りました\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#todo%E7%AE%A1%E7%90%86%E3%81%AFcli%E3%81%A7%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84\"\u003eTODO管理はCLIでやりたい\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%83%AA%E3%83%9E%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E6%A9%9F%E8%83%BD%E3%81%8C%E6%AC%B2%E3%81%97%E3%81%84\"\u003eリマインダー機能が欲しい\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%BF%85%E8%A6%81%E5%8D%81%E5%88%86%E3%81%AA%E6%A9%9F%E8%83%BD%E3%81%8C%E6%AC%B2%E3%81%97%E3%81%84\"\u003e必要十分な機能が欲しい\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E6%96%B9%E6%B3%95\"\u003eインストール方法\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#go\"\u003eGo\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003eバイナリのダウンロード\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e使い方\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81-help%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89\"\u003e概要 (helpコマンド)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AE%E4%BD%BF%E7%94%A8%E6%84%9F\"\u003e実際の使用感\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%83%AA%E3%83%9E%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC\"\u003eリマインダー\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#macos\"\u003emacos\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#slack\"\u003eslack\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"todo管理ツールを作りました\"\u003eTODO管理ツールを作りました\u003c/h1\u003e\n\u003cp\u003ehttps://github.com/dondakeshimo/todo-cli\u003c/p\u003e\n\u003cp\u003etodo-cliというTODO管理アプリを作りました。\nこちら、Go製になります。\u003c/p\u003e\n\u003cp\u003eモチベーションは大きく3つあり、以下それぞれについて述べていきます。\u003c/p\u003e\n\u003ch2 id=\"todo管理はcliでやりたい\"\u003eTODO管理はCLIでやりたい\u003c/h2\u003e\n\u003cp\u003eTODOリストにタスクを加える行為は記憶容量を多少減らしてくれたり、作業再開の際にスムーズに導入できるようにといった目的だと思いますが、そのリターンに対して面倒臭さが勝ってしまうことが往々にしてありました。\n自分はキーボードで操作可能なものは全てキーボードで操作すべきという強迫観念にも似た信条を持っており、マウスやタッチパッドに手を伸ばすという行為はそれだけで多少の心象的ハードルを乗り越える必要があります。\nそのため、タスクの管理におけるコストを極力下げるためにはCLI操作でサッとタスクを残しておき、またその作業に戻った時にスッとタスクを手に取れるようになっていることが理想です。\u003c/p\u003e\n\u003ch2 id=\"リマインダー機能が欲しい\"\u003eリマインダー機能が欲しい\u003c/h2\u003e\n\u003cp\u003eTODO管理をCLIで行うだけなら10は裕に超えるソフトウェアが検索に引っかかります。\n特に\u003ca href=\"https://github.com/todotxt/todo.txt-cli\"\u003etodotxt/todo.txt-cli\u003c/a\u003e はStar数が4.6k (2021/07/23時点) もありしっかりとしたコミュニティと様々な機能が提供されています。\nしかし、私が検索した中でリマインダー機能を外部アプリケーションと連携せず、独立で提供しているCLIツールは見つけられませんでした。\n(リマインダー機能がついたらそれはタスクリストではなくリマインダーでは？というツッコミを入れられた方は夜道にお気をつけください)。\u003c/p\u003e\n\u003cp\u003eTODOリストの本懐はコンテキストスイッチの量とコストを減らすことだと考えています。\nタスク管理を行う上で時間を気にしたり、タスクリストを思い出すといった作業は定期的にコンテキストスイッチが発生することに他なりません。\n余計なコンテキストスイッチが発生するのを防ぐためにリマンインダーは有効であると考えており、これを手軽に利用できるタスクリストがあると嬉しいと感じていました。\u003c/p\u003e\n\u003ch2 id=\"必要十分な機能が欲しい\"\u003e必要十分な機能が欲しい\u003c/h2\u003e\n\u003cp\u003eその他、自分の欲しかった機能をあげていくと\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e優先度によるソート機能\u003c/li\u003e\n\u003cli\u003eグルーピング機能\u003c/li\u003e\n\u003cli\u003eタスクのエントリポイント(チケットのURLとか)に直接飛べる機能 \u0026#x3C;- 未実装\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eあたりになります。一番下については自分も本当に欲しいのか半信半疑なのと、良いUXについて迷ったので未実装になっています。\u003c/p\u003e\n\u003cp\u003e上の二つの項目においては納得いただける方が多いのではないかと思いますし、リッチなタスクマネージャーを利用すれば大抵の場合該当機能は付属しています。\n問題となるのは、リッチなタスクマネージャーを利用した場合コマンドが多くてタスク管理のためのコンテキストスイッチが必要になりそうだった部分です。\nコンテキストスイッチを減らすための工夫でコンテキストスイッチが増えたら本末がすっ転んでしまいます。\n正直自分が作成した管理アプリがそこまでシンプルかと聞かれるとYESとは言い難い気もしますが、コマンド自体はシンプルなtodo管理アプリを参考に4つ程度に収めたのでわかりやすい方ではないかと思います。(自分で作ったので覚えられているだけかもしれませんが...)\u003c/p\u003e\n\u003ch1 id=\"インストール方法\"\u003eインストール方法\u003c/h1\u003e\n\u003ch2 id=\"go\"\u003eGo\u003c/h2\u003e\n\u003cp\u003eGoをインストールしている方は \u003ccode\u003ego install\u003c/code\u003e するのが管理しやすくて良いと思います。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# Go 1.16+\n$ go install github.com/dondakeshimo/todo-cli/cmd/todo@latest\n\n# Go version \u0026#x3C; 1.16\n$ go get -u github.com/dondakeshimo/todo-cli/cmd/todo\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGoのバイナリ置き場に \u003ccode\u003ePATH\u003c/code\u003e を通すことをお忘れなく。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ export PATH=$PATH:$(go env GOPATH)/bin\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"バイナリのダウンロード\"\u003eバイナリのダウンロード\u003c/h2\u003e\n\u003cp\u003eGoがインストールされていない環境をお使いの場合はバイナリの直接ダウンロードもできます。\nMacとUbuntuの環境でビルドしたものを用意しています。\nそれ以外の環境の方はUbuntuのものでお祈りするか、Goをインストールの方お願いいたします。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ TODO_VERSION=1.0.0\n\n$ curl -O https://github.com/dondakeshimo/todo-cli/releases/download/v${TODO_VERSION}/todo-${TODO_VERSION}.macos-10.15.tar.gz\n\n$ tar -xvf todo-${TODO_VERSION}.macos-10.15.tar.gz\n\n$ mv todo path/to/your/$PATH\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"使い方\"\u003e使い方\u003c/h1\u003e\n\u003cp\u003ehttps://github.com/dondakeshimo/todo-cli\u003c/p\u003e\n\u003cp\u003eに頑張って書いたので、ほとんどこれの転載になります。\u003c/p\u003e\n\u003ch2 id=\"概要-helpコマンド\"\u003e概要 (helpコマンド)\u003c/h2\u003e\n\u003cp\u003eこちらがtodo-cliのコマンドになります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ todo --help\nManage Your TODO\n\nUsage:\n  todo [command]\n\nAvailable Commands:\n  add         Add a task\n  close       Close tasks\n  completion  generate the autocompletion script for the specified shell\n  configure   Configure your todo-cli\n  help        Help about any command\n  list        List tasks\n  modify      Modify a task\n  notify      Notify a task (basicaly be used by system)\n\nFlags:\n  -h, --help   help for todo\n\nUse \"todo [command] --help\" for more information about a command.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e各コマンドのhelpも見られます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ todo modify -h\nModify a task\n\nUsage:\n  todo modify [flags]\n\nAliases:\n  modify, m\n\nFlags:\n  -g, --group string         task group. you can get filtered list by group.\n  -h, --help                 help for modify\n  -i, --id int               task's ID (default -1)\n  -p, --priority int         task's priority. Lower number means high priority. (default 100)\n  -d, --remind_time string   remind_time (2021/3/3 03:03, 2021/3/3, +2h3m, task-4h15m)\n  -r, --reminder string      choose reminder from [macos, slack]\n      --remove_reminder      remove reminder. this option overrides reminder option\n  -t, --task string          task contents\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"実際の使用感\"\u003e実際の使用感\u003c/h2\u003e\n\u003cp\u003e次に実際にどのように使用するかを見ていきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ todo list\n+----+--------------------------------+----------------+-------+----------+----------+\n| ID |              Task              |   RemindTime   | Group | Reminder | Priority |\n+----+--------------------------------+----------------+-------+----------+----------+\n|  1 | deleting or modifying this     | 2099/1/1 00:00 |       |          |        0 |\n|    | task is your first TODO        |                |       |          |          |\n+----+--------------------------------+----------------+-------+----------+----------+\n\n$ todo close -i=1\n\n$ todo l\n+----+------+------------+-------+----------+----------+\n| ID | Task | RemindTime | Group | Reminder | Priority |\n+----+------+------------+-------+----------+----------+\n+----+------+------------+-------+----------+----------+\n\n$ todo add \"must task\" -d=\"2021/03/03 12:00\" -g=\"project x\" -r=slack -p=0\n\n$ todo l\n+----+-----------+----------------+-----------+----------+----------+\n| ID |   Task    |   RemindTime   |   Group   | Reminder | Priority |\n+----+-----------+----------------+-----------+----------+----------+\n|  1 | must task | 2021/3/3 12:00 | project x | slack    |        0 |\n+----+-----------+----------------+-----------+----------+----------+\n\n$ todo a \"boring task\" -g=\"project x\"\n\n$ todo a \"important task\" -d=\"2022/01/01\" -p=50\n\n$ todo l\n+----+----------------+----------------+-----------+----------+----------+\n| ID |      Task      |   RemindTime   |   Group   | Reminder | Priority |\n+----+----------------+----------------+-----------+----------+----------+\n|  1 | must task      | 2021/3/3 12:00 | project x | slack    |        0 |\n|  2 | important task | 2022/1/1 00:00 |           |          |       50 |\n|  3 | boaring task   |                | project x |          |      100 |\n+----+----------------+----------------+-----------+----------+----------+\n\n$ todo m -i=1 -t=\"should task\" -p=10\n\n$ todo l -g=\"project x\"\n+----+--------------+----------------+-----------+----------+----------+\n| ID |     Task     |   RemindTime   |   Group   | Reminder | Priority |\n+----+--------------+----------------+-----------+----------+----------+\n|  1 | should task  | 2021/3/3 12:00 | project x | slack    |       10 |\n|  3 | boaring task |                | project x |          |      100 |\n+----+--------------+----------------+-----------+----------+----------+\n\n$ todo conf --hide_reminder=true --show_config\ncolumnwidth: 30\nhidegroup: false\nhidepriority: false\nhidereminder: true\nslackmentionto: XXXXXXXXXX\nslackwebhookurl: https://hooks.slack.com/services/XXXXXXXXXX/XXXXXXXXXX/XXXXXXXXXX\ntaskfilepath: /home/dondakeshimo/.local/share/todo/todo.json\n\n$ todo l\n+----+----------------+----------------+-----------+----------+\n| ID |      Task      |   RemindTime   |   Group   | Priority |\n+----+----------------+----------------+-----------+----------+\n|  1 | should task    | 2021/3/3 12:00 | project x |       10 |\n|  2 | important task | 2022/1/1 00:00 |           |       50 |\n|  3 | boaring task   |                | project x |      100 |\n+----+----------------+----------------+-----------+----------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e使用感はこんな感じになります。\u003c/p\u003e\n\u003cp\u003econfigのところで察された方もいるかもしれませんが、全ての情報をファイルで持っています。\n短期間のTODO管理に堅牢な永続化は不要ですし、トランザクションや競合もユーザが一人想定なので不要です。\nファイルで十分だったのでそのように実装したのですが、副次的にファイルを管理することで複数のTODO管理を切り替えたり、新しい環境にTODOリストを引き継ぐことが可能になりました。(私はそのようなことはしないと思いますが)\u003c/p\u003e\n\u003cp\u003e後はそうですね、上記の例で見せられていない部分としてcloseする際のidは複数選択可能です。 \u003ccode\u003e-id 1,2,3,4\u003c/code\u003e のように指定できます。\nまた、 \u003ccode\u003e-d\u003c/code\u003e オプションは相対時間で指定することが可能になっています。これは後述するリマインダーの使用方法で使っています。\u003c/p\u003e\n\u003ch2 id=\"リマインダー\"\u003eリマインダー\u003c/h2\u003e\n\u003cp\u003e実装に大いに苦しめられましたが、使用者からしたら開発者の苦労話など基本的にどうでも良いと思うので別記事にまとめます。\u003c/p\u003e\n\u003cp\u003eリマインダーは2種類用意しています。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003emacos\u003c/li\u003e\n\u003cli\u003eslack\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e名前の通りmacosはMacでのみ利用可能です。Slackは事前に設定が必要になりますが、linux環境できます。\nWindows環境については未対応になります(私がWindowsで開発を行わないため、しばらく対応されないと思います)。\u003c/p\u003e\n\u003ch3 id=\"macos\"\u003emacos\u003c/h3\u003e\n\u003cp\u003emacosはシステムのポップアップを用いたリマインダー機能になります。\nリマインダーの名前は \u003ccode\u003emacos\u003c/code\u003e となっています。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ todo a \"remind me this task\" -r=macos -d=+1m\n\n$ todo l\n+----+---------------------+-----------------+-------+----------+----------+\n| ID |        Task         |   RemindTime    | Group | Reminder | Priority |\n+----+---------------------+-----------------+-------+----------+----------+\n|  1 | remind me this task | 2021/3/3 01:01  |       | macos    |      100 |\n+----+---------------------+-----------------+-------+----------+----------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上記のようにタスクを登録すれば、1分後に下記のような通知を受け取れます。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://user-images.githubusercontent.com/23194960/126190791-be2dae4a-5e56-4e59-8151-a6d88e48f0e9.png\" alt=\"notification\"\u003e\u003c/p\u003e\n\u003cp\u003edoneボタンを押すとタスクは自動的にクローズされて、skipを押すと特に何もしません。\n当初は何分後に再通知するみたいなボタンを足そうかと考えていた気がするのですが、疲れた時期に実装していた箇所であることと、結局あったところで自分は使わないなと思い未実装です。\u003c/p\u003e\n\u003ch3 id=\"slack\"\u003eslack\u003c/h3\u003e\n\u003cp\u003eSlackを用いたリマインダーを利用するためには事前に設定が必要になります。\n\u003ca href=\"https://slack.com/intl/ja-jp/help/articles/115005265063-Slack-%E3%81%A7%E3%81%AE-Incoming-Webhook-%E3%81%AE%E5%88%A9%E7%94%A8\"\u003eSlack での Incoming Webhook の利用\u003c/a\u003e を参考にIncoming Webhookを通知させたいSlackのworkspaceに導入したいただく必要があります。\nこちらで設定した際に得られるWebhook URLと、workspaceにおける自分のmember IDをtodo-cliに設定します。\n設定コマンドは下記の通りになります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ todo conf --slack_webhook_url=\"https://hooks.slack.com/services/XXXXXXXX/XXXXXXXX\" --slack_mention_to=XXXXXXXXXX\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eそれでは \u003ccode\u003e-r slack\u003c/code\u003e オプションを使ってタスクを追加します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ todo a \"remind me this task in slack\\!\" -r=slack -d=+1m\n\n$ todo l\n+----+-------------------------------+-----------------+-------+----------+----------+\n| ID |             Task              |   RemindTime    | Group | Reminder | Priority |\n+----+-------------------------------+-----------------+-------+----------+----------+\n|  1 | remind me this task in slack! | 2021/7/20 01:11 |       | slack    |      100 |\n+----+-------------------------------+-----------------+-------+----------+----------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e1分後に下図のような通知がslackに届いていると思います。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://user-images.githubusercontent.com/23194960/126192217-cee8469b-b917-4770-ab76-f604556bd3e2.png\" alt=\"notification in slack\"\u003e\u003c/p\u003e\n\u003ch1 id=\"まとめ\"\u003eまとめ\u003c/h1\u003e\n\u003cp\u003e本記事ではtodo-cliを作成した理由と使用方法の紹介を行いました。\n是非使用の検討をしていただければと思います。\u003c/p\u003e\n\u003cp\u003e開発における工夫した点や学び気づきなどは別記事を書こうと思うのでそちらも見ていただければ幸いです。\u003c/p\u003e","ogImage":{"url":"/assets/blog/dynamic-routing/cover.jpg"},"coverImage":"/assets/blog/dynamic-routing/cover.jpg"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2021-07-23-introduce_todo_cli"},"buildId":"yNrEyh5A0Oyk3eJQw5kY9","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>